# Walrus TypeScript SDK æ’ä»¶

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.2+-blue.svg)](https://www.typescriptlang.org/)
[![Node.js](https://img.shields.io/badge/Node.js-18.0+-green.svg)](https://nodejs.org/)

> **ä¸“ä¸šçš„ Walrus å»ä¸­å¿ƒåŒ–å­˜å‚¨ AI è¾…åŠ©å¼€å‘æ’ä»¶** - ä¸º Claude Code ç”¨æˆ·æä¾›æ™ºèƒ½åŒ–çš„ Walrus TypeScript SDK é›†æˆè§£å†³æ–¹æ¡ˆ

## ğŸ“– æ’ä»¶ç®€ä»‹

Walrus TypeScript SDK æ’ä»¶æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ Web3 å¼€å‘å·¥å…·ï¼Œä¸“é—¨ä¸º Walrus å»ä¸­å¿ƒåŒ–å­˜å‚¨ç½‘ç»œæä¾› AI è¾…åŠ©å¼€å‘æ”¯æŒã€‚è¯¥æ’ä»¶åŒ…å« 4 ä¸ªæ ¸å¿ƒ AI æŠ€èƒ½ï¼Œè¦†ç›–ä»£ç ç”Ÿæˆã€é”™è¯¯è¯Šæ–­ã€æ€§èƒ½ä¼˜åŒ–å’Œç›‘æ§åˆ†æç­‰å…³é”®å¼€å‘ç¯èŠ‚ã€‚

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- **ğŸš€ æ™ºèƒ½ä»£ç ç”Ÿæˆ** - æ ¹æ®ä½¿ç”¨åœºæ™¯è‡ªåŠ¨ç”Ÿæˆæœ€ä½³å®è·µä»£ç 
- **ğŸ” ä¸“ä¸šé”™è¯¯è¯Šæ–­** - æ™ºèƒ½åˆ†æå’Œè§£å†³ Walrus åº”ç”¨é—®é¢˜
- **âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®** - æ•°æ®é©±åŠ¨çš„æ€§èƒ½ç“¶é¢ˆåˆ†æå’Œä¼˜åŒ–æ–¹æ¡ˆ
- **ğŸ“Š å…¨é¢ç›‘æ§åˆ†æ** - å­˜å‚¨ä½¿ç”¨ç›‘æ§ã€æˆæœ¬åˆ†æå’Œæ€§èƒ½æŒ‡æ ‡è·Ÿè¸ª

## ğŸ› ï¸ æŠ€èƒ½æ¦‚è§ˆ

### 1. ä»£ç ç”Ÿæˆå™¨ (`walrus-code-generator`)

è‡ªåŠ¨ç”Ÿæˆ Walrus TypeScript SDK é›†æˆä»£ç å’Œæœ€ä½³å®è·µæ¨¡æ¿ã€‚

**æ”¯æŒçš„ä½¿ç”¨åœºæ™¯ï¼š**
- `basic-upload` - åŸºç¡€æ–‡ä»¶ä¸Šä¼ 
- `advanced-storage` - é«˜çº§å­˜å‚¨ç®¡ç†
- `browser-app` - æµè§ˆå™¨åº”ç”¨é›†æˆ
- `batch-processing` - æ‰¹é‡å¤„ç†ç³»ç»Ÿ

**æ”¯æŒçš„æ¡†æ¶ï¼š**
- React / Vue / Next.js
- Node.js / Express
- TypeScript åŸç”Ÿ

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- âœ… é”™è¯¯å¤„ç†æœºåˆ¶
- âœ… è¿›åº¦è·Ÿè¸ª
- âœ… æ‰¹é‡æ“ä½œ
- âœ… ç¼“å­˜ç®¡ç†
- âœ… é’±åŒ…é›†æˆ

### 2. é”™è¯¯è¯Šæ–­ä¸“å®¶ (`walrus-debugger`)

Walrus é”™è¯¯è¯Šæ–­ä¸“å®¶ï¼Œæ™ºèƒ½åˆ†æå’Œè§£å†³ Walrus åº”ç”¨ä¸­çš„é—®é¢˜ã€‚

**è¯Šæ–­ç±»å‹ï¼š**
- ä¸Šä¼ å¤±è´¥é”™è¯¯
- ä¸‹è½½é”™è¯¯
- ç½‘ç»œè¿æ¥é—®é¢˜
- é…ç½®é”™è¯¯
- è¶…æ—¶é—®é¢˜
- è®¤è¯å¤±è´¥

**è¯Šæ–­èƒ½åŠ›ï¼š**
- ğŸ” é”™è¯¯æ ¹å› åˆ†æ
- ğŸ’¡ æ™ºèƒ½è§£å†³æ–¹æ¡ˆ
- ğŸ›¡ï¸ é¢„é˜²æªæ–½å»ºè®®
- ğŸ“ ä¿®å¤ä»£ç ç”Ÿæˆ

### 3. æ€§èƒ½ä¼˜åŒ–ä¸“å®¶ (`walrus-performance-optimizer`)

åˆ†æå’Œä¼˜åŒ– Walrus åº”ç”¨çš„æ€§èƒ½ç“¶é¢ˆã€‚

**ä¼˜åŒ–ç»´åº¦ï¼š**
- ä¸Šä¼ æ€§èƒ½ä¼˜åŒ–
- ä¸‹è½½æ€§èƒ½ä¼˜åŒ–
- æ‰¹é‡æ“ä½œä¼˜åŒ–
- å†…å­˜ä½¿ç”¨ä¼˜åŒ–
- ç½‘ç»œä¼ è¾“ä¼˜åŒ–

**ä¼˜åŒ–ç­–ç•¥ï¼š**
- ğŸ“Š æ€§èƒ½æŒ‡æ ‡åˆ†æ
- ğŸ¯ ç“¶é¢ˆè¯†åˆ«
- âš¡ ä¼˜åŒ–æ–¹æ¡ˆåˆ¶å®š
- ğŸ“ˆ æ€§èƒ½æå‡éªŒè¯

### 4. ç›‘æ§åˆ†æä¸“å®¶ (`walrus-monitor`)

å­˜å‚¨ä½¿ç”¨ç›‘æ§ã€æˆæœ¬åˆ†æå’Œæ€§èƒ½æŒ‡æ ‡è·Ÿè¸ªã€‚

**ç›‘æ§ç±»å‹ï¼š**
- `usage` - å­˜å‚¨ä½¿ç”¨ç›‘æ§
- `cost` - æˆæœ¬åˆ†æ
- `performance` - æ€§èƒ½æŒ‡æ ‡
- `errors` - é”™è¯¯ç»Ÿè®¡
- `analytics` - ç»¼åˆåˆ†æ

**ç›‘æ§æŒ‡æ ‡ï¼š**
- ğŸ“ æ–‡ä»¶æ•°é‡ç»Ÿè®¡
- ğŸ’¾ å­˜å‚¨ç©ºé—´ä½¿ç”¨
- ğŸ’° æˆæœ¬åˆ†ææŠ¥å‘Š
- â±ï¸ æ€§èƒ½æŒ‡æ ‡è·Ÿè¸ª
- ğŸš¨ å¼‚å¸¸å‘Šè­¦

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…æ’ä»¶

```bash
# é€šè¿‡ Web3 Skills å¸‚åœºå®‰è£…
/plugin install walrus-ts@web3-skills

# æˆ–è€…å…‹éš†é¡¹ç›®
git clone https://github.com/icehugh/web3-skills.git
cd web3-skills/plugins/walrus-ts
```

### åŸºç¡€ä½¿ç”¨

#### 1. ç”ŸæˆåŸºç¡€ä¸Šä¼ ä»£ç 

```typescript
skill: "walrus-code-generator"
// use-case: basic-upload
// framework: nodejs
// features: ["error-handling", "progress-tracking"]
```

#### 2. è¯Šæ–­ä¸Šä¼ é”™è¯¯

```typescript
skill: "walrus-debugger"
// error-type: upload
// error-context: "Upload failed: insufficient storage balance"
// environment: nodejs
```

#### 3. ä¼˜åŒ–ä¸Šä¼ æ€§èƒ½

```typescript
skill: "walrus-performance-optimizer"
// analysis-type: upload
// target-metric: speed
// code-context: "æ‰¹é‡æ–‡ä»¶ä¸Šä¼ é€Ÿåº¦è¾ƒæ…¢"
```

#### 4. ç›‘æ§å­˜å‚¨ä½¿ç”¨

```typescript
skill: "walrus-monitor"
// monitor-type: usage
// time-range: 24h
// metrics: ["file-count", "storage-size", "cost"]
```

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

### ç³»ç»Ÿè¦æ±‚

- **Node.js**: >= 18.0.0
- **TypeScript**: ^5.2.2
- **Claude Code**: æœ€æ–°ç‰ˆæœ¬

### æ ¸å¿ƒä¾èµ–

- **@mysten/walrus-sdk**: ^0.6.7
- **@mysten/sui.js**: ^1.0.0
- **@suiet/wallet-kit**: ^0.0.0 (æµè§ˆå™¨ç¯å¢ƒ)

### å¼€å‘ä¾èµ–

```json
{
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.2.2",
    "jest": "^29.0.0",
    "eslint": "^8.0.0",
    "prettier": "^3.0.0"
  }
}
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
plugins/walrus-ts/
â”œâ”€â”€ skills/                           # AI æŠ€èƒ½å®šä¹‰
â”‚   â”œâ”€â”€ walrus-code-generator.md     # ä»£ç ç”ŸæˆæŠ€èƒ½
â”‚   â”œâ”€â”€ walrus-debugger.md           # é”™è¯¯è¯Šæ–­æŠ€èƒ½
â”‚   â”œâ”€â”€ walrus-monitor.md            # ç›‘æ§åˆ†ææŠ€èƒ½
â”‚   â””â”€â”€ walrus-performance-optimizer.md # æ€§èƒ½ä¼˜åŒ–æŠ€èƒ½
â”œâ”€â”€ CLAUDE.md                        # æ’ä»¶æ–‡æ¡£
â”œâ”€â”€ README.md                        # æœ¬æ–‡æ¡£
â””â”€â”€ package.json                     # ä¾èµ–é…ç½®
```

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: åˆ›å»ºæ–‡ä»¶ä¸Šä¼ æœåŠ¡

```typescript
// ä½¿ç”¨ä»£ç ç”ŸæˆæŠ€èƒ½
skill: "walrus-code-generator"
// use-case: basic-upload
// framework: nodejs
// features: ["error-handling", "progress-tracking"]

// ç”Ÿæˆçš„ä»£ç ç¤ºä¾‹ï¼š
import { SuiJsonRpcClient, getFullnodeUrl } from '@mysten/sui.js/client';
import { walrus, WalrusFile } from '@mysten/walrus-sdk';
import { Ed25519Keypair } from '@mysten/sui.js/keypairs/ed25519';

export class WalrusUploader {
  private client: any;
  private signer: any;

  constructor(network: 'testnet' | 'mainnet' = 'testnet') {
    const suiClient = new SuiJsonRpcClient({
      url: getFullnodeUrl(network),
      network,
    }).$extend(walrus());

    this.client = suiClient;
    this.signer = this.createSigner();
  }

  async uploadFile(filePath: string): Promise<UploadResult> {
    // å®ç°ä¸Šä¼ é€»è¾‘
    // åŒ…å«é”™è¯¯å¤„ç†å’Œè¿›åº¦è·Ÿè¸ª
  }
}
```

### ç¤ºä¾‹ 2: React æ–‡ä»¶ä¸Šä¼ ç»„ä»¶

```typescript
// ä½¿ç”¨ä»£ç ç”ŸæˆæŠ€èƒ½
skill: "walrus-code-generator"
// use-case: browser-app
// framework: react
// features: ["wallet-integration", "drag-drop"]

// ç”Ÿæˆçš„ React ç»„ä»¶ï¼š
export const WalrusUpload: React.FC = () => {
  const { upload, isUploading } = useWalrus();
  const [dragActive, setDragActive] = useState(false);

  return (
    <div
      className="upload-area"
      onDrop={handleDrop}
      onDragOver={(e) => e.preventDefault()}
    >
      {/* æ‹–æ‹½ä¸Šä¼ ç•Œé¢ */}
    </div>
  );
};
```

### ç¤ºä¾‹ 3: æ€§èƒ½ä¼˜åŒ–å»ºè®®

```typescript
// ä½¿ç”¨æ€§èƒ½ä¼˜åŒ–æŠ€èƒ½
skill: "walrus-performance-optimizer"
// analysis-type: batch
// target-metric: throughput
// code-context: "æ‰¹é‡æ–‡ä»¶ä¸Šä¼ å¤„ç†"

// è·å¾—çš„ä¼˜åŒ–å»ºè®®ï¼š
class OptimizedBatchUploader {
  private readonly MAX_CONCURRENT = 5;
  private readonly BATCH_DELAY = 100;

  async uploadBatch(files: File[]): Promise<UploadResult[]> {
    // å¹¶å‘æ§åˆ¶å’Œæ‰¹æ¬¡å¤„ç†é€»è¾‘
    const chunks = this.chunkArray(files, this.MAX_CONCURRENT);

    for (const chunk of chunks) {
      const results = await Promise.allSettled(
        chunk.map(file => this.uploadSingle(file))
      );
      // å¤„ç†ç»“æœå’Œé”™è¯¯
    }
  }
}
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®

```bash
# Walrus ç½‘ç»œé…ç½®
WALRUS_NETWORK=testnet          # testnet | mainnet
WALRUS_PRIVATE_KEY=your_private_key

# å­˜å‚¨èŠ‚ç‚¹é…ç½®
WALRUS_NODE_URL=https://walrus-testnet.nodereal.io
WALRUS_TIMEOUT=60000

# ç›‘æ§é…ç½®
WALRUS_MONITOR_ENABLED=true
WALRUS_METRICS_INTERVAL=300000   # 5åˆ†é’Ÿ
```

### TypeScript é…ç½®

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "declaration": true,
    "outDir": "./dist"
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

## ğŸ“Š æ€§èƒ½åŸºå‡†

### ä¸Šä¼ æ€§èƒ½

| æ–‡ä»¶å¤§å° | å•æ–‡ä»¶ä¸Šä¼  | æ‰¹é‡ä¸Šä¼  (5ä¸ª) | ä¼˜åŒ–æå‡ |
|---------|-----------|---------------|----------|
| 1MB     | 2.3s      | 4.1s          | 45%      |
| 10MB    | 8.7s      | 15.2s         | 52%      |
| 50MB    | 42.1s     | 68.3s         | 62%      |

### å†…å­˜ä½¿ç”¨

| æ“ä½œç±»å‹     | åŸå§‹å®ç° | ä¼˜åŒ–å®ç° | å†…å­˜èŠ‚çœ |
|-------------|---------|---------|----------|
| å•æ–‡ä»¶ä¸Šä¼    | 120MB   | 85MB    | 29%      |
| æ‰¹é‡ä¸Šä¼      | 450MB   | 280MB   | 38%      |
| æ–‡ä»¶ä¸‹è½½     | 200MB   | 130MB   | 35%      |

## ğŸ›¡ï¸ å®‰å…¨è€ƒè™‘

### æ•°æ®å®‰å…¨

- ğŸ” ç§é’¥å®‰å…¨å­˜å‚¨
- ğŸ›¡ï¸ è¾“å…¥æ•°æ®éªŒè¯
- ğŸ” æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥
- ğŸš« æ¶æ„æ–‡ä»¶æ£€æµ‹

### ç½‘ç»œå®‰å…¨

- ğŸ”’ HTTPS åŠ å¯†ä¼ è¾“
- ğŸŒ ç½‘ç»œè¶…æ—¶ä¿æŠ¤
- ğŸ”„ è‡ªåŠ¨é‡è¯•æœºåˆ¶
- ğŸ“ æ“ä½œæ—¥å¿—è®°å½•

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ä¸Šä¼ å¤±è´¥

**é—®é¢˜**: `Upload failed: insufficient storage balance`

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// æ£€æŸ¥å­˜å‚¨ä½™é¢
const balance = await client.getStorageBalance(accountAddress);
if (balance < requiredAmount) {
  // å……å€¼æˆ–æ¸…ç†å­˜å‚¨ç©ºé—´
}
```

#### 2. ç½‘ç»œè¶…æ—¶

**é—®é¢˜**: `Network timeout during upload`

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// å¢åŠ è¶…æ—¶æ—¶é—´å’Œé‡è¯•æœºåˆ¶
const client = new WalrusClient({
  network: 'testnet',
  timeout: 120000,  // 2åˆ†é’Ÿ
  retryAttempts: 3,
  retryDelay: 5000
});
```

#### 3. å†…å­˜ä¸è¶³

**é—®é¢˜**: `Out of memory during batch upload`

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// ä½¿ç”¨æµå¼å¤„ç†å’Œåˆ†æ‰¹ä¸Šä¼ 
class StreamUploader {
  async uploadLargeFile(filePath: string) {
    const stream = fs.createReadStream(filePath);
    const chunks = this.chunkStream(stream);

    for (const chunk of chunks) {
      await this.uploadChunk(chunk);
      // é‡Šæ”¾å†…å­˜
      chunk.buffer = null;
    }
  }
}
```

### è°ƒè¯•æŠ€å·§

1. **å¯ç”¨è¯¦ç»†æ—¥å¿—**
```typescript
const logger = winston.createLogger({
  level: 'debug',
  transports: [new winston.transports.Console()]
});
```

2. **ç›‘æ§ç½‘ç»œçŠ¶æ€**
```typescript
const monitor = new NetworkMonitor();
monitor.on('slow-connection', (speed) => {
  logger.warn(`ç½‘ç»œé€Ÿåº¦è¾ƒæ…¢: ${speed} Mbps`);
});
```

3. **æ€§èƒ½åˆ†æ**
```typescript
const profiler = new Profiler();
profiler.start();
await uploadOperation();
const metrics = profiler.stop();
logger.info('æ€§èƒ½æŒ‡æ ‡:', metrics);
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/icehugh/web3-skills.git
cd web3-skills/plugins/walrus-ts

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æ¨¡å¼
npm run dev

# è¿è¡Œæµ‹è¯•
npm test

# æ„å»ºé¡¹ç›®
npm run build
```

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- éµå¾ª ESLint + Prettier è§„èŒƒ
- ç¼–å†™å•å…ƒæµ‹è¯• (è¦†ç›–ç‡ > 80%)
- æ·»åŠ  JSDoc æ³¨é‡Š
- éµå¾ª Conventional Commits

### æäº¤æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- **å®˜æ–¹æ–‡æ¡£**: [Walrus Developer Docs](https://docs.walrus.org)
- **API å‚è€ƒ**: [Walrus API Reference](https://api.docs.walrus.org)
- **ç¤¾åŒºè®ºå›**: [Walrus Community](https://community.walrus.org)
- **GitHub ä»“åº“**: [Web3 Skills](https://github.com/icehugh/web3-skills)

## ğŸ“ æ”¯æŒä¸åé¦ˆ

- **é—®é¢˜æŠ¥å‘Š**: [GitHub Issues](https://github.com/icehugh/web3-skills/issues)
- **åŠŸèƒ½è¯·æ±‚**: [GitHub Discussions](https://github.com/icehugh/web3-skills/discussions)
- **é‚®ä»¶è”ç³»**: support@web3-skills.dev

---

## ğŸ“ˆ æ›´æ–°æ—¥å¿—

### v2.0.0 (2025-11-11)

- ğŸš€ é‡æ–°è®¾è®¡é¡¹ç›®æ¶æ„å’Œæ–‡æ¡£ç»“æ„
- âœ¨ å®Œæˆ 4 ä¸ªæ ¸å¿ƒ AI æŠ€èƒ½å¼€å‘
- ğŸ“‹ æ–°å¢ React ç»„ä»¶ä»£ç ç”Ÿæˆæ”¯æŒ
- âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®ç³»ç»Ÿ
- ğŸ“Š ç›‘æ§åˆ†æåŠŸèƒ½å®Œå–„
- ğŸ›¡ï¸ å¢å¼ºé”™è¯¯å¤„ç†æœºåˆ¶

### v1.0.0 (2025-10-15)

- ğŸ‰ é¡¹ç›®åˆå§‹å‘å¸ƒ
- ğŸ“ åŸºç¡€æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
- ğŸ” ç®€å•é”™è¯¯è¯Šæ–­
- ğŸ“ˆ åŸºç¡€ç›‘æ§åŠŸèƒ½

---

*æœ€åæ›´æ–°æ—¶é—´ï¼š2025-11-11*
*æ–‡æ¡£ç‰ˆæœ¬ï¼š2.0.0*
*ç»´æŠ¤è€…ï¼šicehugh*